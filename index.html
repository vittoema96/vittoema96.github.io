<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1"><!--, viewport-fit=cover">-->

        <!-- Meta tags for theme and PWA -->
        <meta name="theme-color" content="#afff03"/>
        <link rel="canonical" href="https://vittoema96.github.io/" />
        <link rel="manifest" href="manifest.json">
        <link rel="icon" href="/img/icons/192x192.png" type="image/png">
        <link rel="icon" href="/img/icons/512x512.png" type="image/png">
        <link rel="apple-touch-icon" href="/img/icons/192x192.png" type="image/png">
        <link rel="apple-touch-icon" href="/img/icons/512x512.png" type="image/png">

        <!-- Google Fonts -->
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Fira+Code&family=Roboto+Mono&family=Share+Tech+Mono&display=swap" rel="stylesheet">

        <!-- Font Awesome - Used for the Gear icon on Settings-->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
        <link rel="stylesheet" href="css/styles.css">


        <title>Pip-Boy 3000</title>
    </head>

    <body>
        <!-- Loading message -->
        <div id="loader">
            <pre>
<span class="turn-on-animation">
██████╗ ██╗██████╗       ██████╗  █████╗██╗   ██╗
██╔══██╗██║██╔══██╗      ██╔══██╗██╔══██╬██╗ ██╔╝
██████╔╝██║██████╔╝█████╗██████╔╝██║  ██║╚████╔╝
██╔═══╝ ██║██╔═══╝ ╚════╝██╔══██╗██║  ██║ ╚██╔╝
██║     ██║██║           ██████╔╝╚█████╔╝  ██║
╚═╝     ╚═╝╚═╝           ╚═════╝  ╚════╝   ╚═╝

      ██████╗  ██████╗  ██████╗  ██████╗
      ╚════██╗██╔═████╗██╔═████╗██╔═████╗
       █████╔╝██║██╔██║██║██╔██║██║██╔██║
       ╚═══██╗████╔╝██║████╔╝██║████╔╝██║
      ██████╔╝╚██████╔╝╚██████╔╝╚██████╔╝
      ╚═════╝  ╚═════╝  ╚═════╝  ╚═════╝
</span>
<span class="boot-text">> ROBCO INDUSTRIES (TM) TERMLINK PROTOCOL</span>
<span class="boot-text">> COPYRIGHT 2075-2077 ROBCO INDUSTRIES</span>
<span class="boot-text" id="appVersion">> LOADER {version}</span>
<span class="boot-text">> WELCOME, OVERSEER</span>
            </pre>
        </div>

        <!-- Tooltip HTML (only one is needed for the whole page) -->
        <div id="tooltip-container" class="tooltip-panel">
            <!-- Content will be injected by JavaScript -->
            <div id="arrow" class="tooltip-arrow"></div>
        </div>

        <!-- D20 popup -->
        <dialog id="popup-d20">
            <header class="l-lastSmall">
                <!-- H1 variabile in js -->
                <span class="h1 h1--margin-top" id="popup-d20__skillTitle">Skill Name</span>
                <button class="popup__button-close">&times;</button>
            </header>
            <div class="l-lastSmall row">
                <select id="popup-d20__selector-special"
                        aria-label="Special to use?">
                    <!-- TODO move to js -->
                     <option data-lang-id="strength" value="strength">Strength</option>
                     <option data-lang-id="perception" value="perception">Perception</option>
                     <option data-lang-id="endurance" value="endurance">Endurance</option>
                     <option data-lang-id="charisma" value="charisma">Charisma</option>
                     <option data-lang-id="intelligence" value="intelligence">Intelligence</option>
                     <option data-lang-id="agility" value="agility">Agility</option>
                     <option data-lang-id="luck" value="luck">Luck</option>
                </select>
                <input type="checkbox" id="popup-d20__checkbox-luck"
                       class="themed-svg" data-icon="luck"
                       aria-label="Use Luck" alt="Use Luck"/>
            </div>
            <hr>
            <span class="h3 target-number" id="popup-d20-target">Target: 13</span>
            <span class="target-breakdown" id="popup-d20-target-breakdown">8 (Skill) + 5 (Agility)</span>
            <span class="crit-breakdown" id="popup-d20-crit-breakdown">Critical Hit: Roll ≤ 5</span>
            <hr>
            <div class="row">
                <div class="d20-dice dice active" data-value="1">?</div>
                <div class="d20-dice dice active" data-value="2">?</div>
                <div class="d20-dice dice" data-value="3">?</div>
                <div class="d20-dice dice" data-value="4">?</div>
                <div class="d20-dice dice" data-value="5">?</div>
            </div>
            <section class="costs-section">
                <div class="oldRow">
                    <span data-lang-id="apCost">AP Cost</span>
                    <span id="popup-d20-ap-cost">2</span>
                </div>
                <div class="oldRow">
                    <span data-lang-id="aim" data-lang-format="%s?">Aim?</span>
                    <input type="checkbox" id="popup-d20-aim-checkbox" aria-label="Aim"
                           class="themed-svg" data-icon="attack"/>
                </div>
                <div class="oldRow">
                    <span data-lang-id="luckCost">Luck Cost</span>
                    <div class="oldRow">
                        <span id="popup-d20-payed-luck">1</span>
                        <span id="popup-d20-luck-cost">(-1)+2</span>
                    </div>
                </div>
            </section>
            <hr>
            <span class="h3" id="popup-d20-successes-display">Successes: ?</span>
            <hr>
            <footer class="row"><!--</footer><section class="buttons-section">-->
                <button id="popup-d20-damage-button" data-lang-id="damage" class="confirm-button">Tira Danno</button>
                <button id="popup-d20-roll-button" class="confirm-button">Roll</button>
                <button class="button-close" data-lang-id="cancel">Cancel</button>
            </footer><!--</section>-->
        </dialog>

        <!-- D6 popup -->
        <dialog id="popup-d6">
            <header class="l-lastSmall">
                <section>
                    <!-- H1 variabile in js -->
                    <span class="h1 h1--margin-top" id="d6-weapon-name">Weapon Name</span>
                    <span class="h5" id="d6-damage-type">Tipo Danno</span>
                </section>
                <button class="popup__button-close">&times;</button>
            </header>

            <div id="d6-tags" class="tags-container">
                <!-- Tags are added dynamically -->
            </div>
            <hr>
            <span class="h3">Dadi Danno</span>
            <div id="d6-damage-dice-container" class="row row--wrap row--centered">
                <!-- Dices are added dynamically -->
            </div>
            <span class="h3" id="d6-extra-hits-title">Colpi Extra</span>
            <div id="d6-extra-hits-container" class="row row--wrap row--centered">
                <!-- Dices are added dynamically -->
            </div>
            <hr>
            <div class="row row--distributed">
                <span data-lang-id="luckCost">Luck Cost</span>
                <div class="row row--centered">
                    <span id="popup-d6-payed-luck">1</span>
                    <span id="popup-d6-luck-cost">(-1)+2</span>
                </div>
            </div>
            <div class="row row--distributed">
                <span data-lang-id="ammoCost">Ammo Cost</span>
                <div class="row row--centered">
                    <span id="popup-d6-payed-ammo">1</span>
                    <span id="popup-d6-ammo-cost">(-1)+2</span>
                </div>
            </div>
            <hr>
            <div class="row row--distributed">
                <div class="row row--centered">
                    <span class="h3"
                          data-lang-id="damage" data-lang-format="%s:">Damage:</span>
                    <span class="h3" id="d6-total-damage">?</span>
                </div>
                <div class="row row--centered">
                    <span class="h3"
                          data-lang-id="effects" data-lang-format="%s:">Effects:</span>
                    <span class="h3" id="d6-total-effects">?</span>
                </div>
            </div>
            <hr>
            <footer>
                <button id="d6-roll-button" class="confirm-button">Roll</button>
                <button class="button-close">Cancel</button>
            </footer>
        </dialog>

        <dialog id="popup-addItem">
            <header class="l-lastSmall">
                <span class="h2 h1--margin-top">Scegli un oggetto:</span><!-- TODO language -->
                <button class="popup__button-close">&times;</button>
            </header>
            <hr>
            <div class="row">
                <select id="popup-addItem__selector" aria-label="Object picker"></select>
                <input type="number" aria-label="Object quantity"
                       id="popup-addItem__quantity"
                       min="1" value="1"
                       style="width: 5rem;"> <!-- TODO use css file -->
            </div>
            <hr>
            <footer>
                <button class="confirm-button">Conferma</button>
                <button class="button-close">Indietro</button>
            </footer>
        </dialog>

        <dialog id="popup-tradeItem">
            <header class="l-lastSmall">
                <span class="h1">Commercio</span> <!-- TODO language -->
                <button class="popup__button-close">&times;</button>
            </header>
            <span class="h5" id="tradeType">Selling/Buying</span>
            <hr>
            <div class="oldRow">
                <span class="h3">Quantità:</span> <!-- TODO language -->
                <input type="number" id="tradeQuantity" min="1" value="1" aria-label="Trade quantity" style="width: 80px; text-align: center;"> <!-- TODO use css file -->
            </div>
            <div class="oldRow">
                <span class="h3">Prezzo:</span> <!-- TODO language -->
                <input type="number" id="tradePrice" min="1" value="1" aria-label="Trade price" style="width: 80px; text-align: center;"> <!-- TODO use css file -->
            </div>
            <div class="oldRow">
                <span class="h3">Totale:</span> <!-- TODO language -->
                <div class="oldRow">
                    <span class="h3" id="tradeTotal">0</span>
                    <div class="themed-svg" data-icon="caps" style="margin:0.5rem; width:1rem; height:1rem;"></div>
                </div>
            </div>
            <footer>
                <button class="confirm-button">Conferma</button><!-- TODO language -->
                <button class="button-close">Indietro</button>
            </footer>
        </dialog>

        <dialog id="popup-editHeaderStats">
            <header class="l-lastSmall">
                <span class="h1">Modifica</span> <!-- TODO language -->
                <button class="popup__button-close">&times;</button>
            </header>
            <hr>
            <span class="h3">HP</span> <!-- TODO language -->
            <div class="oldRow">
                <input type="number" id="adjustHpNew" min="1" value="1" aria-label="Trade quantity" style="width: 80px; text-align: center;"> <!-- TODO use css file -->
                <span id="adjustHpOld"></span>
            </div>
            <hr>
            <span class="h3">Caps</span> <!-- TODO language -->
            <div class="oldRow">
                <input type="number" id="adjustCapsNew" min="1" value="1" aria-label="Trade price" style="width: 80px; text-align: center;"> <!-- TODO use css file -->
                <div class="oldRow">
                    <span id="adjustCapsOld"></span>
                    <div class="themed-svg" data-icon="caps" style="margin:0.5rem; width:1rem; height:1rem;"></div>
                </div>
            </div>
            <hr>
            <span class="h3">Luck</span> <!-- TODO language -->
            <div class="oldRow">
                <input type="number" id="adjustLuckNew" min="1" value="1" aria-label="Trade price" style="width: 80px; text-align: center;"> <!-- TODO use css file -->
                <span id="adjustLuckOld"></span>
            </div>
            <hr>
            <header>
                <button class="confirm-button">Conferma</button><!-- TODO language -->
                <button class="button-close">Indietro</button>
            </header>
        </dialog>

        <header class="l-lastSmall">
            <span class="h1">Pip-Boy 3000</span>
            <div id="c-headerStats">
                <div class="icon-text-pair">
                    <div class="themed-svg"
                         data-icon="hp"></div>
                    <div id="c-headerStats__hp">? / ?</div>
                </div>
                <div class="icon-text-pair">
                    <div class="themed-svg"
                         data-icon="caps"></div>
                    <div id="c-headerStats__caps">?</div>
                </div>
                <div class="icon-text-pair">
                    <div class="themed-svg"
                         data-icon="weight"></div>
                    <div id="c-headerStats__weight">? / ?</div>
                </div>
            </div>
        </header>

        <hr>

        <nav class="navigator" id="main-navigator">
            <button class="tab-button active" data-tab-id="stat">STAT</button>
            <button class="tab-button" data-tab-id="inv">INV</button>
            <button class="tab-button" data-tab-id="data">DATA</button>
            <button class="tab-button" data-tab-id="map">MAP</button>
            <button class="tab-button mini-tab-button" data-tab-id="settings">
                <i class="fas fa-gear"></i>
            </button>
        </nav>
        <main id="main-container">

            <section id="stat-tabContent" class="tabContent">
                <div id="c-special">
                    <div class="special" data-special="strength">
                        <span class="special__name" data-lang-id="strength">Strength</span>
                        <span class="special__value" id="special__value-strength">0</span>
                    </div>
                    <div class="special" data-special="perception">
                        <span class="special__name" data-lang-id="perception">Perception</span>
                        <span class="special__value" id="special__value-perception">0</span>
                    </div>
                    <div class="special" data-special="endurance">
                        <span class="special__name" data-lang-id="endurance">Endurance</span>
                        <span class="special__value" id="special__value-endurance">0</span>
                    </div>
                    <div class="special" data-special="charisma">
                        <span class="special__name" data-lang-id="charisma">Charisma</span>
                        <span class="special__value" id="special__value-charisma">0</span>
                    </div>
                    <div class="special" data-special="intelligence">
                        <span class="special__name" data-lang-id="intelligence">Intelligence</span>
                        <span class="special__value" id="special__value-intelligence">0</span>
                    </div>
                    <div class="special" data-special="agility">
                        <span class="special__name" data-lang-id="agility">Agility</span>
                        <span class="special__value" id="special__value-agility">0</span>
                    </div>
                    <div class="special" data-special="luck">
                        <span class="special__name" data-lang-id="luck">Luck</span>
                        <span class="special__value" id="special__value-luck">0</span>
                        <div id="sub-special" class="themed-svg sub-special ">
                            <span class="special__value" id="luck-current-value">0</span>
                        </div>
                    </div>
                </div>

                <div class="row row--spaced">
                    <div class="derived-stat">
                        <span data-lang-id="defense">Defense</span>
                        <span id="defense-value">0</span>
                    </div>
                    <div class="derived-stat">
                        <span data-lang-id="initiative">Initiative</span>
                        <span id="initiative-value">0</span>
                    </div>
                    <div class="derived-stat">
                        <span data-lang-id="melee-damage">Melee Damage</span>
                        <span id="melee-damage-value">0</span>
                    </div>
                </div>

                <div>
                    <h1 class="form-label">Skills:</h1>
                    <section id="skills" class="itemlist"></section>
                </div>
                <button id="edit-stats-button" class="button">Edit Stats</button>
            </section>

            <section id="inv-tabContent" class="tabContent hidden">
                <div class="navigator">
                    <!-- TODO translate -->
                    <button class="subTab-button active" data-sub-screen="weapons">WEAPONS</button>
                    <button class="subTab-button" data-sub-screen="armor">ARMOR</button>
                    <button class="subTab-button" data-sub-screen="supplies">SUPPLIES</button>
                    <button class="subTab-button" data-sub-screen="ammo">AMMO</button>
                </div>

                <div class="subScreen active" id="inv-weapons">
                    <div class="itemlist-header">
                        <span class="h2" data-lang-id="smallGuns">Small Guns</span>
                        <button class="add-item-button" onclick="openAddItemModal('smallGuns')">+</button>
                    </div>
                    <div id="smallGuns-cards" class="card-carousel"></div>
                    <div class="itemlist-header">
                        <span class="h2" data-lang-id="energyWeapons">Energy Weapons</span>
                        <button class="add-item-button" onclick="openAddItemModal('energyWeapons')">+</button>
                    </div>
                    <div id="energyWeapons-cards" class="card-carousel"></div>
                    <div class="itemlist-header">
                        <span class="h2" data-lang-id="bigGuns">Big Guns</span>
                        <button class="add-item-button" onclick="openAddItemModal('bigGuns')">+</button>
                    </div>
                    <div id="bigGuns-cards" class="card-carousel"></div>
                    <div class="itemlist-header">
                        <span class="h2" data-lang-id="meleeWeapons">Melee Weapons</span>
                        <button class="add-item-button" onclick="openAddItemModal('meleeWeapons')">+</button>
                    </div>
                    <div id="meleeWeapons-cards" class="card-carousel"></div>
                    <div class="itemlist-header">
                        <span class="h2" data-lang-id="explosives">Explosives</span>
                        <button class="add-item-button" onclick="openAddItemModal('explosives')">+</button>
                    </div>
                    <div id="explosives-cards" class="card-carousel"></div>
                    <div class="itemlist-header">
                        <span class="h2" data-lang-id="throwing">Throwing</span>
                        <button class="add-item-button" onclick="openAddItemModal('throwing')">+</button>
                    </div>
                    <div id="throwing-cards" class="card-carousel"></div>
                    <div class="itemlist-header">
                        <span class="h2" data-lang-id="unarmed">Unarmed</span>
                        <button class="add-item-button" onclick="openAddItemModal('unarmed')">+</button>
                    </div>
                    <div id="unarmed-cards" class="card-carousel"></div>
                </div>
                <div class="subScreen hidden" id="inv-armor">
                    <span class="h1">WORK IN PROGRESS</span>
                    <div id="armor-cards"></div>
                </div>
                <div class="subScreen hidden" id="inv-supplies">
                    <div class="itemlist-header">
                        <span class="h2" data-lang-id="food">Food</span>
                        <button class="add-item-button" onclick="openAddItemModal('food')">+</button>
                    </div>
                    <div id="food-cards" class="card-carousel"></div>
                    <div class="itemlist-header">
                        <span class="h2" data-lang-id="drinks">Drinks</span>
                        <button class="add-item-button" onclick="openAddItemModal('drinks')">+</button>
                    </div>
                    <div id="drinks-cards" class="card-carousel"></div>
                    <div class="itemlist-header">
                        <span class="h2" data-lang-id="meds">Meds</span>
                        <button class="add-item-button" onclick="openAddItemModal('meds')">+</button>
                    </div>
                    <div id="meds-cards" class="card-carousel"></div>
                </div>
                <div class="subScreen hidden" id="inv-ammo">
                    <div class="itemlist-header">
                        <span class="h2" data-lang-id="ammo">Ammo</span>
                        <button class="add-item-button" onclick="openAddItemModal('ammo')">+</button>
                    </div>
                    <div id="ammo-cards" class="flex-container"></div>
                </div>

            </section>

            <section id="data-tabContent" class="tabContent hidden">
                <div class="row row--spaced">
                    <label class="h1" for="level">Livello:</label>
                    <input id="level" type="number" min="1" step="1"/>
                </div>
                <label for="character-background">Background:</label>
                <textarea id="character-background" class="form-control" rows="5" placeholder="Scrivi il tuo background qui..."></textarea>
                <br/><br/><br/><br/>
                <span class="h1">WORK IN PROGRESS</span>
            </section>

            <section id="map-tabContent" class="tabContent hidden">
                <div id="map-container">
                    <img id="map-image" src="/img/png/map.png" alt="Zoomable Map">
                </div>
            </section>

            <section id="settings-tabContent" class="tabContent hidden">
                <span class="h3">Settings</span>
                <label for="language-select">Language:</label>
                <select id="language-select" onchange="translator.loadTranslations(this.value)">
                    <option value="en">English</option>
                    <option value="it">Italiano</option>
                </select>
                <hr>
                <label for="theme-select">Theme:</label>
                <select id="theme-select" onchange="changeTheme(this.value)">
                    <option value="theme-fallout-3">Fallout 3</option>
                    <option value="theme-fallout-new-vegas">Fallout New Vegas</option>
                </select>
                <hr>
                <button id="reset-memory-button">RESET MEMORY</button>
            </section>

        </main>

        <!-- Template for generic card -->
        <template id="generic-card-template">
            <div class="card">
                <div class="card-header">
                    <div class="card-name-container">
                        <div class="card-quantity"><i>2x</i></div>
                        <div class="card-name">Item name</div>
                    </div>
                    <div class="right-header">
                        <div class="right-header-item">
                            <div data-lang-id="cost">Cost</div>
                            <div class="card-cost-value">123</div>
                        </div>
                        <div class="right-header-item">
                            <div data-lang-id="weight">Weight</div>
                            <div class="card-weight-value">6.5 kg</div>
                        </div>
                        <div class="right-header-item">
                            <div data-lang-id="rarity"></div>
                            <div class="card-rarity-value">2</div>
                        </div>
                    </div>
                </div>
                <div class="card-content">
                    <div class="card-controls">
                        <button class="themed-svg card-attack-button" data-icon="attack"></button>
                        <button class="description-toggle-button" data-action="toggle-description"
                                data-lang-id="showDescription">Show Description</button>
                    </div>
                    <div class="description-container">
                        <div class="description"></div>
                    </div>
                </div>
                <div class="card-overlay hidden" data-action="cancel-overlay"> <!-- TODO Redo buttons, they are ugly -->
                    <button class="button-close" data-action="cancel-overlay">
                        <i class="fas fa-times"></i>
                    </button>
                    <button class="confirm-button" data-icon="caps" data-action="sell">
                        <img src="img/svg/caps.svg" alt="Sell"/>
                    </button>
                    <button class="delete-button" data-action="delete">
                        <i class="fas fa-trash"></i>
                    </button>
                </div>
            </div>
        </template>

        <template id="ammo-card-template">
            <div class="ammo-card row">
                <span class="card-quantity ammo-quantity"><i>AMMO QUANTITY</i></span>
                <span class="ammo-card-name">AMMO NAME</span>

                <div class="card-overlay hidden" data-action="cancel-overlay"> <!-- TODO Redo buttons, they are ugly -->
                    <button class="confirm-button" data-icon="caps" data-action="sell">
                        <img src="img/svg/caps.svg" alt="Sell"/>
                    </button>
                    <button class="delete-button" data-action="delete">
                        <i class="fas fa-trash"></i>
                    </button>
                </div>
            </div>
        </template>


        <script src="js/app.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
        <script src="js/character.js"></script>
        <script src="js/display.js"></script>

        <!-- Above map.js or it doesn't work -->
        <script src="https://unpkg.com/@panzoom/panzoom@4.6.0/dist/panzoom.min.js"></script>
        <script src="js/map.js"></script>

        <script src="js/popup.js"></script>
        <script src="js/tabs.js"></script>
        <script src="js/utils.js"></script>
        <script src="js/lang/translator.js"></script>
    </body>
</html>

